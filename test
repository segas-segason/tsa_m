Вопрос 1

Из БД FRED загрузите ряд UNRATENSA (частотность месячные) с 2000-01-01 по 2024-12-31 проведите сглаживание (выделение локального тренда) с использованием фильтра Ходрика-Прескотта (параметры из лекции)
В ответе укажите значение локального тренда в финальной точке. Ответ округлите до 2 десятичных знаков.

Ответ = 1.41 (неверно)
Должно быть: 3.65


Решение
Файл time-series-analysis/jupyter-notebooks/hpfilter-statsmodels.ipynb

#Шапка библиотек
import numpy as np
import pandas as pd

from statsmodels.tsa.filters.hp_filter import hpfilter

import pandas_datareader.data as web

# настройки визуализация
import matplotlib.pyplot as plt

# Не показывать Warnings
import warnings
warnings.simplefilter(action='ignore', category=Warning)
# Не показывать ValueWarning, ConvergenceWarning из statsmodels
from statsmodels.tools.sm_exceptions import ValueWarning, ConvergenceWarning
warnings.simplefilter('ignore', category=ValueWarning)
warnings.simplefilter('ignore', category=ConvergenceWarning)

#Затем
gdp = web.DataReader(name='здесь указывается название ряда в нашем случае UNRATENSA', data_source='fred', start="2000-01-01", end="2024-12-31")

#здесь нужно указать наш ряд, а не логарифм
y = gdp['UNRATENSA']

#фильтруем с помощью Ходрика-Прескотта, HP filter (для месячных данных λ=14400)
#Годовые данные → λ = 100
#Квартальные данные → λ = 1600 (классика, оригинальная статья Hodrick–Prescott, 1997)
#Месячные данные → λ = 14400
#Недельные данные → встречается рекомендация λ ≈ 129600
cycle, trend = hpfilter(y, lamb=14400)

#как в лекции 
plt.plot(trend, label='trend')
plt.plot(y, label='level')
plt.legend()
plt.show()

plt.plot(cycle)
plt.show()

# Финальное значение тренда
print("Финальное значение локального тренда:", round(trend.iloc[-1], 2))

------------------------------------------------------------------------------------------------------------------------------

Вопрос 2

Из БД FRED скачайте недельные данные по '30-Year Fixed Rate Mortgage Average in the United States' (ряд с именем MORTGAGE30US) с 2005-01-01 по 2024-01-31 и создайте ряд y
Найдите оптимальный порядок модели ARIMA, используя по критерий HQIC и тест единичного корня ADF

Ответ (верно)
p = 2
d = 1
q = 2


#bp файла time-series-analysis/jupyter-notebooks/arima-pmdarima.ipynb
import numpy as np
import pandas as pd

import pmdarima as pm

import pandas_datareader.data as web

# настройки визуализации
import matplotlib.pyplot as plt

# Не показывать Warnings
import warnings
warnings.simplefilter(action='ignore', category=Warning)

#меняем название с WTB3MS на MORTGAGE30US и дату
y = web.DataReader(name='MORTGAGE30US', data_source='fred', start='2005-01-01', end='2024-01-31')
#указание ряда
y = y['MORTGAGE30US']
# нужно поменять в information_criterion на bic или hqic и test на adf или какое в задании
forecaster = AutoARIMA(information_criterion='hqic', test='adf')
forecaster.fit(y)
forecaster.get_fitted_params() #['order']

------------------------------------------------------------------------------------------------------------------------------

Вопрос 3

Из БД FRED скачайте недельные данные по '15-Year Fixed Rate Mortgage Average in the United States' (ряд с именем MORTGAGE15US) с 2010-01-01 по 2024-01-31. Пусть y - первая разность ставки
Подгоните модель AR(2)-GARCH(1,1) с λ = 2 и постройте прогноз для ряда на один период. 
В ответе укажите значение прогноза, умноженное на 1000. Результат округлите до 2-х десятичных знаков.

Ответ
20.79 (неверно)

Решение

#файл time-series-analysis/jupyter-notebooks/garch-archpy.ipynb
# шапка

import numpy as np
import pandas as pd

from arch import arch_model

from arch.univariate import ARX, GARCH, ARCHInMean 

import pandas_datareader.data as web

# настройки визуализации
import matplotlib.pyplot as plt

# Не показывать Warnings
import warnings
warnings.simplefilter(action='ignore', category=Warning)

# загружаем
rate = web.DataReader(name='MORTGAGE15US', data_source='fred', start='2010-01-01', end='2024-01-31')
# y первая разность ставки
y = rate.diff().dropna()

y.plot()
plt.show()

# Подгоним модель AR(2)-GARCH(1,1) AR 2 - указано в lags, где λ = 2 (указывается в power, вместо о=2)

am = arch_model(y, mean='ARX', lags=2, vol='GARCH', p=1, q=1, power=2)

res = am.fit()
# указываем колво периодов в horizon у нас в задании 1
y_forecasts = res.forecast(horizon=1)

# Прогноз среднего
y_forecasts.mean

y_forecasts.residual_variance

# прогноз волатильности
y_forecasts.variance

------------------------------------------------------------------------------------------------------------------------------

Вопрос 4

Из БД FRED скачайте недельные данные по '15-Year Fixed Rate Mortgage Average in the United States' (ряд с именем MORTGAGE15US) с 2010-01-01 по 2024-01-31. Пусть y - первая разность ставки
Вычислите частный коэффициент автокорреляции r_part (4). Ответ округлите до 3 - десятичных знаков.

Ответ
-0.020 (неверно)

Решение


------------------------------------------------------------------------------------------------------------------------------

Вопрос 5 ??????

Из БД FRED скачайте недельные данные по '30-Year Fixed Rate Mortgage Average in the United States' (ряд с именем MORTGAGE30US) с 2005-01-01 по 2024-01-31 и создайте ряд y
Подгоните модель ARIMA (1,1,1) со сносом и укажите коэффициенты. Ответ округлите до 3-х десятичных знаков.

Ответ (верно)



Вопрос 6

Из БД FRED скачайте недельные данные по 'Moody's Seasoned Aaa Corporate Bond Yield' (ряд с именем WAAA) с 2005-01-01 по 2024-01-31 и создайте ряд y
Подгоните модель ARIMA (2,1,1) со сносом и проведите тест на серийную корреляцию. Число лагов возьмите равным 8. В ответе укажите тестовую статистику и сделайте вывод. Ответ округлите до 3-х десятичных знаков. Уровень значимости 1%

Ответ (частично верно)
Тестовая статистика = 196.286 (неверно)
Вывод: Есть серийная корреляция (верно)



Вопрос 7

Рассмотрим модель ARIMA (p, d, q)
Δy_t = 5 - 0.4Δy_t-1 + u_t - 0.4u_t-1 + 0.04u_t-2
Порядок этой модели

Ответ (частично верно)
p = 2 (неверно)
d = 1 (верно)
q = 1 (неверно)



Вопрос 8

Из БД FRED загрузите ряд TB3MS (частотность месячные) с 2000-01-01 по 2024-12-31
Проведите разложение ряда на локальный тренд и сезонную компоненту методом STL с (число сезонов = 7)
В ответе укажите значение локального тренда в финальной точке. Ответ округлите до 2 десятичных знаков.

Ответ (верно)
4.68



Вопрос 9

Из БД FRED скачайте недельные данные по 'Moody's Seasoned Aaa Corporate Bond Yield' (ряд с именем WAAA) с 2005-01-01 по 2024-01-31 и создайте ряд y
Подгоните модель ARIMA (2,1,1) без сноса и вычислите прогноз на 1 шаг вперёд. Ответ окгруглите до 4-ч десятичных знаков.

Ответ (верно)
4.9458



Вопрос 10

Из БД FRED загрузите ряд AAA (частотность месячные) с 2000-01-01 по 2024-12-31
Для этого ряда подгоните модель пространства состояний  с локальным трендом и сезонность (число сезонов = 6, без цикличной компоненты, stochastic_level=stochastic_trend=stochastic_seasonal=True)
Постройте прогноз на один период вперёд. Ответ округлите до 2 десятичных знаков.

Ответ (верно)
5.17



Вопрос 11 ???????

Рассмотрим модель AR(P)-GARCH(p,q)

y_t = α_0 + 


Ответ (частично верно)
p = 2 (неверно)
q = 1 (верно)
λ = 2 (верно)



Вопрос 12

Из БД FRED скачайте недельные данные по '30-Year Fixed Rate Mortgage Average in the United States' (ряд с именем MORTGAGE30US) с 2010-01-01 по 2024-01-31 и создайте ряд y
Проведите ADF-тест для первой разности ряда y (выбрав подходящий вариант с константой/трендом). В ответе укажите тестовую статистику, критическое знание и сделайте вывод.
Ответ округлите до 3-х десятичных знаков. Уровень значимости 5%

Ответ (частично верно)
Статистика = -16.041 (неверно)
Вывод: Нет единичного корня (верно)



Вопрос 13

Из БД FRED скачайте недельные данные по '15-Year Fixed Rate Mortgage Average in the United States' (ряд с именем MORTGAGE15US) c 2010-01-01 по 2024-01-31. Пусть y - первая разность ставки
Подгоните модель AR(2) - GARCH(1,1) с λ = 2 и укажите её коэффициенты. Результат округлите до 3-х десятичных знаков

Ответ
α = 0.146 (верно)
β = 0.829 (верно)
